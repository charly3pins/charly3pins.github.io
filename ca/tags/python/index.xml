<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>python on charly3pins.dev</title>
    <link>https://charly3pins.dev/ca/tags/python/</link>
    <description>Recent content in python on charly3pins.dev</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 01 May 2020</lastBuildDate><atom:link href="https://charly3pins.dev/ca/tags/python/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Tournaments generator</title>
      <link>https://charly3pins.dev/ca/code/tournaments-generator/</link>
      <pubDate>Fri, 01 May 2020</pubDate>
      
      <guid>https://charly3pins.dev/ca/code/tournaments-generator/</guid>
      <description>Prova del concepte de creaci√≥ d&#39;una aplicaci√≥ per gestionar tornejos FIFA 20 entre diferents persones que utilitzen Flutter per crear una aplicaci√≥ m√≤bil i Go per crear una API que actua com a servidor. Tamb√© es va utilitzar Python per construir rascadors senzills.</description>
      <content>&lt;h2 id=&#34;per-qu√®&#34;&gt;PER QU√à&lt;/h2&gt;
&lt;p&gt;La motivaci√≥ per iniciar aquest projecte no √©s una altra que la meva curiositat per les aplicacions m√≤bils. √âs obvi que la forma de consumir tecnologia ha canviat en els darrers anys i que cada vegada es fa m√©s a trav√©s d‚Äôun dispositiu m√≤bil. Per aquest motiu, volia explorar com funcionen les aplicacions m√≤bils i com en puc crear una des de zero.
Vaig fer alguns tutorials d&amp;rsquo;Android, per√≤ com que canvien moltes coses en publicar noves versions i la meva idea era construir quelcom gen√®ric per a tots els dispositius, vaig decidir provar-ho amb &lt;a href=&#34;https://flutter.dev/&#34;&gt;Flutter&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Estava entre &lt;a href=&#34;https://reactnative.dev/&#34;&gt;React Native&lt;/a&gt; o Flutter, per√≤ despr√©s de llegir alguns pros i contres, he decidit aliar-me amb Flutter. Vaig comen√ßar a llegir la seva &lt;a href=&#34;https://flutter.dev/docs&#34;&gt;documentaci√≥&lt;/a&gt; i era molt similar a Android (utilitzen Dart a la part inferior) i vaig comen√ßar a recordar els meus vells temps als tutorials d&amp;rsquo;Android i m&amp;rsquo;agrada, aix√≠ que Vaig continuar. Despr√©s d‚Äôuns dies llegint nom√©s documentaci√≥ t√®cnica, vaig continuar amb l‚Äôaplicaci√≥ &amp;ldquo;hello world&amp;rdquo; &lt;a href=&#34;https://flutter.dev/docs/get-started/codelab&#34;&gt;tutorial&lt;/a&gt; que ofereixen al lloc web. I, finalment, estava preparat per comen√ßar el meu propi projecte.&lt;/p&gt;
&lt;p&gt;Durant el moment que va comen√ßar la pand√®mia mundial, jo i els meus amics vam iniciar una lliga FIFA 20 a PS4 per distreure‚Äôns a les tardes / nits. Inicialment nom√©s es jugava i res m√©s, per√≤ despr√©s vam comen√ßar a tenir un tauler de Power BI per a estad√≠stiques, un canal de YouTube per compartir els jocs en directe i despr√©s emmagatzemar-los all√† i un Twitter per publicar les actualitzacions de la classificaci√≥ cada setmana. La primera lliga es va crear manualment, una mica de dolor i s√∫per est√†tica, aix√≠ que he decidit utilitzar aquest tema per crear una aplicaci√≥ que ens ajudi a gestionar la segona lliga creant la lliga, gestionant els nostres equips i partits all√†, notificant els resultats i mostrant estad√≠stiques m√©s detallades a l&amp;rsquo;interior.&lt;/p&gt;
&lt;h2 id=&#34;qu√®&#34;&gt;QU√à&lt;/h2&gt;
&lt;p&gt;Primer de tot, volia posar tota la informaci√≥ real de FIFA 20 al lloc web relacionada amb lligues, equips i jugadors. Per a aix√≤, he trobat alguns llocs web que tenen aquesta informaci√≥ oberta i gratu√Øta, per√≤ que no tenen cap API per consumir-la. La idea de copiar manualment era molt temptadora, per√≤ vaig preferir escriure un rastrejador senzill a &lt;a href=&#34;https://www.python.org/&#34;&gt;Python&lt;/a&gt; mitjan√ßant la biblioteca &lt;a href=&#34;https://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors&#34;&gt;BeautifulSoup&lt;/a&gt; amb els selectors css que proporciona. Fent alguns ajustaments aqu√≠ i all√†, al final vaig acabar tenint 3 fitxers JSON, un per a cada tema que volia inicialment, aix√≠ que tot perfecte.&lt;/p&gt;
&lt;p&gt;A continuaci√≥, per introduir tota aquesta informaci√≥ a la base de dades, la idea era crear una eina de l√≠nia d&amp;rsquo;ordres que llegeixi aquests fitxers i generi les sent√®ncies SQL corresponents i, a continuaci√≥, generar els fitxers de migraci√≥ corresponents.
He triat &lt;a href=&#34;https://golang.org/&#34;&gt;Go&lt;/a&gt; com a llenguatge de programaci√≥ per a l&amp;rsquo;API i he creat un &lt;code&gt;cmd&lt;/code&gt; que em permet fer la idea desitjada. La base de dades seria &lt;a href=&#34;https://www.postgresql.org/&#34;&gt;PostgreSQL&lt;/a&gt;, de manera que les &amp;ldquo;insercions&amp;rdquo; han de ser segons la seva sintaxi.&lt;/p&gt;
&lt;p&gt;Amb totes les dades inicials a punt, he comen√ßat a dissenyar la resta de la base de dades i els possibles punts finals ho necessiten per gestionar tota aquesta informaci√≥. He triat &lt;a href=&#34;https://github.com/gorilla/mux&#34;&gt;mux&lt;/a&gt; per a l&amp;rsquo;HTTP, ja que √©s senzill per√≤ potent en comparaci√≥ amb el lib est√†ndard (nom√©s per a l&amp;rsquo;an√†lisi de par√†metres val la pena &amp;hellip;). Com que volia explorar m√©s el costat de l‚Äôaplicaci√≥ m√≤bil que el servidor, nom√©s vaig organitzar el codi amb &lt;a href=&#34;https://www.oreilly.com/library/view/software-architecture-patterns/9781491971437/ch01.html&#34;&gt;Arquitectura per capes&lt;/a&gt; com a ORM per simplificar la consulta i els mapejos entre la base de dades i els meus models.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/api-structure.jpeg&#34; alt=&#34;api structure&#34;&gt;&lt;/p&gt;
&lt;p&gt;Dins de la carpeta &lt;code&gt;cmd&lt;/code&gt; he creat diferents ordres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;migraci√≥: gestiona les migracions a la base de dades&lt;/li&gt;
&lt;li&gt;analitzador: tradueix el json del rastrejador a sent√®ncies sql&lt;/li&gt;
&lt;li&gt;servidor: executa el servidor&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Dins de la carpeta &lt;code&gt;pkg&lt;/code&gt; √©s f√†cil identificar el que fan les carpetes pel seu propi nom.&lt;/p&gt;
&lt;p&gt;Per a l&amp;rsquo;aplicaci√≥ m√≤bil, vaig comen√ßar a posar tots els fitxers dins d&amp;rsquo;una carpeta de &amp;ldquo;components&amp;rdquo;, per√≤ quan va comen√ßar a cr√©ixer era un kaos complet per gestionar. Despr√©s d‚Äôafegir m√©s complexitat a l‚Äôaplicaci√≥, acabo trobant una manera neta d‚Äôorganitzar el codi, dividint-lo en dues carpetes separades; un per al nucli i un altre per a la interf√≠cie d‚Äôusuari. Despr√©s, dins de cadascun, tamb√© vaig classificar els diferents tipus de components en funci√≥ de les seves responsabilitats i, al final, el codi (almenys per a mi que no s√≥c expert en Flutter) va quedar molt net i (sens dubte) m√©s mantenible . A sota de l&amp;rsquo;organitzaci√≥ de la carpeta en una vista general:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/app-structure.jpeg&#34; alt=&#34;app structure&#34;&gt;&lt;/p&gt;
&lt;p&gt;Al principi, quan vaig comen√ßar a codificar i a veure els resultats, tot era fant√†stic i vaig pensar que era m√©s f√†cil del que s&amp;rsquo;esperava. La connexi√≥ de l‚Äôaplicaci√≥ amb l‚ÄôAPI nom√©s era q√ºesti√≥ de saber utilitzar la biblioteca &lt;code&gt;http&lt;/code&gt; i els m√®todes&lt;code&gt; get&lt;/code&gt; o &lt;code&gt;post&lt;/code&gt; es van connectar sense problemes.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-dart&#34; data-lang=&#34;dart&#34;&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; client &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; http.Client();

    &lt;span style=&#34;color:#66d9ef&#34;&gt;String&lt;/span&gt; jsonBody &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; json.encode(user.toJson());
    &lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; response &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; client.post(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;$&lt;/span&gt;_baseUrl&lt;span style=&#34;color:#e6db74&#34;&gt;/token&amp;#34;&lt;/span&gt;,
        headers: {&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Content-Type&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;application/json&amp;#39;&lt;/span&gt;}, body: jsonBody);

    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (response.statusCode &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;) {
      &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; User.fromJson(json.decode(response.body));
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;L‚Äô√∫nic problema que m‚Äôhe enfrontat √©s que estava executant les aplicacions des de l‚ÄôAndroid Emulator; aix√≤ vol dir que s&amp;rsquo;estava executant en una m√†quina virtual, de manera que la IP no era la meva local i no pot accedir al &lt;code&gt;localhost&lt;/code&gt;. Despr√©s d&amp;rsquo;una mica d&amp;rsquo;investigaci√≥, he trobat el correcte i tot ha funcionat correctament.&lt;/p&gt;
&lt;p&gt;Els problemes van comen√ßar quan volia transmetre informaci√≥ entre components i actualitzar la vista en funci√≥ d‚Äôaquesta informaci√≥, o millor encara, no actualitzar si no canvia res quan torno a entrar a una vista (per exemple, passar d‚Äôuna llista a una vista de detall, i tornar a la llista). Despr√©s d‚Äôun dia llegint als f√≤rums sobre el mateix problema que m‚Äôenfrontava, he trobat el paquet &lt;a href=&#34;https://pub.dev/packages/provider&#34;&gt;Prove√Ødor&lt;/a&gt; i tot semblava f√†cil i el sant grial de tot, per√≤ no ho era.&lt;/p&gt;
&lt;p&gt;El veritable dolor acaba de comen√ßar aqu√≠! Vaig trigar uns dies a entendre realment el seu funcionament. El prove√Ødor inicial √©s f√†cil d‚Äôentendre, l‚Äôutilitzeu i funciona, per√≤ nom√©s voleu canviar nom√©s una petita part de la vista, o b√© reconstruir-ne la completa, o b√© modificar alguns valors en una vista A i a continuaci√≥, aneu a veure B i vegeu els canvis que hi ha, i tots aquests exemples estan completament codificats i primer heu de saber que hi ha una manera de fer cada cas i, en segon lloc, heu de saber com fer-ho. Al final he utilitzat el prove√Ødor, el ProxyProvider, el StreamProvider i el ChangeNotifierProvider.&lt;/p&gt;
&lt;p&gt;El projecte no est√† acabat, per√≤ ara com ara est√† en espera amb les funcions seg√ºents:&lt;/p&gt;
&lt;p&gt;Inicialment, l&amp;rsquo;usuari pot canviar entre les vistes d&amp;rsquo;inscripci√≥/inici de sessi√≥.
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/signup.png&#34; alt=&#34;signup&#34;&gt;
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/login.png&#34; alt=&#34;login&#34;&gt;&lt;/p&gt;
&lt;p&gt;Un cop l‚Äôusuari es troba dins de l‚Äôaplicaci√≥, hi ha diferents pestanyes on han de jugar els seg√ºents &lt;code&gt;Partits&lt;/code&gt;, els &lt;code&gt;Torneigs&lt;/code&gt; que juga i els &amp;ldquo;Grups&amp;rdquo; on √©s present i els membres que hi ha. A la part superior t√© una barra de navegaci√≥ amb una imatge de perfil, una icona de campana per a les notificacions, una icona d‚Äôobjectiu per buscar altres membres i afegir com a amics i el bot√≥ de tancament de sessi√≥ per desconnectar.
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/home.png&#34; alt=&#34;home&#34;&gt;&lt;/p&gt;
&lt;p&gt;Si fa clic a la foto de perfil, es dirigeix directament al perfil de l&amp;rsquo;usuari on mostra els amics i on pot editar la seva informaci√≥ personal (nom, nom d&amp;rsquo;usuari, foto de perfil):
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/profile.png&#34; alt=&#34;profile&#34;&gt;&lt;/p&gt;
&lt;p&gt;En pr√©mer la icona de la lent, canvia la visualitzaci√≥ a la funcionalitat de supercercador que permet a l&amp;rsquo;usuari trobar altres persones que ja estan a la plataforma, afegir-les com a amics i despr√©s crear grups, generar torneigs i jugar partits junts. El cercador √©s una cerca &amp;ldquo;m&amp;rsquo;agrada&amp;rdquo;, de manera que si alguna de les lletres que introdueix apareix en algun nom d&amp;rsquo;usuari, es mostrar√† all√†.
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/searcher.png&#34; alt=&#34;searcher&#34;&gt;&lt;/p&gt;
&lt;p&gt;Despr√©s, si l‚Äôusuari introdueix un perfil que no √©s un amic, apareixer√† el bot√≥ per afegir-lo i, si es fa clic, ocultar√† aquest bot√≥ i mostrar√† la informaci√≥ que ja hi ha una sol¬∑licitud enviada, esperant l‚Äôaltre usuari. per respondre-ho.
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/add-friend.png&#34; alt=&#34;add friend&#34;&gt;
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/add-friend-requested.png&#34; alt=&#34;add friend requested&#34;&gt;&lt;/p&gt;
&lt;p&gt;Actuant com a altre usuari, en iniciar la sessi√≥, la icona de campana mostrar√† una nova notificaci√≥. Accedir a l&amp;rsquo;interior apareix com una notificaci√≥ d&amp;rsquo;amistat i es pot respondre directament des de la llista o entrar al perfil de &amp;ldquo;sol¬∑licitant&amp;rdquo; i acceptar-lo o rebutjar-lo. Si s‚Äôaccepta la sol¬∑licitud d‚Äôamistat, apareixer√† com a nou amic al perfil de l‚Äôusuari.
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/friend-request-notification.png&#34; alt=&#34;friend request notification&#34;&gt;
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/friend-request-notification-answer.png&#34; alt=&#34;friend request notification answer&#34;&gt;
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/profile-multifriends.png&#34; alt=&#34;profile multi friends&#34;&gt;&lt;/p&gt;
&lt;p&gt;Despr√©s que un usuari tingui alguns amics, √©s el moment en qu√® pot crear un grup. Per a aix√≤, l&amp;rsquo;aplicaci√≥ t√© la tercera pestanya anomenada &lt;code&gt;Grups&lt;/code&gt; i un bot√≥ (+).
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/new-group.png&#34; alt=&#34;new group&#34;&gt;&lt;/p&gt;
&lt;p&gt;Dins del generador de grups es mostrar√† la llista dels amics a la part superior. A mesura que es seleccionen, es col¬∑loquen a la llista seg√ºent, on es poden eliminar si es vol; quan tots els amics estiguin seleccionats, √©s hora de passar a la pantalla seg√ºent mitjan√ßant el bot√≥ (&amp;ndash;&amp;gt;).
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/new-group-selected.png&#34; alt=&#34;new group selected&#34;&gt;&lt;/p&gt;
&lt;p&gt;El seg√ºent pas √©s posar un bon nom per a aquest grup i, a continuaci√≥, pr√©mer la marca per crear el grup.
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/new-group-name.png&#34; alt=&#34;new group name&#34;&gt;&lt;/p&gt;
&lt;p&gt;Quan l&amp;rsquo;usuari torna a la visualitzaci√≥ inicial, apareix el grup nou creat i els membres d&amp;rsquo;aquest a la llista.
&lt;img src=&#34;https://charly3pins.dev/images/code/tournaments-generator/new-group-created.png&#34; alt=&#34;new group created&#34;&gt;&lt;/p&gt;
&lt;p&gt;A partir d‚Äôaqu√≠ el que falta √©s crear els &lt;code&gt;Torneigs&lt;/code&gt; seleccionant el grup i els membres d‚Äôaquest grup que volen jugar, el nombre d‚Äôequips per a cada membre, els equips, les rondes, el tipus de torneig, etc. i despr√©s generar el calendari. Mostra el calendari a la pestanya &amp;ldquo;Coincid√®ncies&amp;rdquo; i dins de cada coincid√®ncia permetr√† als usuaris afegir els resultats. Tamb√© proporcioneu una classificaci√≥ i les estad√≠stiques de cada partit i una agrupada per a cada partit i una de gen√®rica.&lt;/p&gt;
&lt;h2 id=&#34;pensaments-finals&#34;&gt;PENSAMENTS FINALS&lt;/h2&gt;
&lt;p&gt;Amb aquesta prova de concepte, vaig tenir l&amp;rsquo;oportunitat de treballar en una aplicaci√≥ complexa en termes de disseny de components reutilitzables en una aplicaci√≥ m√≤bil, trucar a una API externa per gestionar la informaci√≥ que es mostra a l&amp;rsquo;aplicaci√≥ i aprendre a utilitzar el paquet de prove√Ødor per moure informaci√≥. entre vistes m√∫ltiples i controlar l‚Äôestat de l‚Äôaplicaci√≥ d‚Äôuna manera m√©s senzilla i efica√ß.&lt;/p&gt;
&lt;p&gt;Hi ha molt m√©s a aprendre sobre el desenvolupament de m√≤bils, per√≤ considero aquest projecte com un pas inicial per comen√ßar. Algun dia far√© les vistes que falten per tal de poder utilitzar-les al m√≥n real, per√≤ espero que no sigui perqu√® tenim una altra pand√®mia üòè&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Codi font de l&amp;rsquo;API en Go: &lt;a href=&#34;https://github.com/charly3pins/fifa-gen-api&#34;&gt;https://github.com/charly3pins/fifa-gen-api&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Codi font de l&amp;rsquo;app en Flutter: &lt;a href=&#34;https://github.com/charly3pins/fifa_gen&#34;&gt;https://github.com/charly3pins/fifa_gen&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    </item>
    
  </channel>
</rss>