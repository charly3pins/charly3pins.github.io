<!DOCTYPE html>
<html lang="en" data-theme="light">
	
	<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="referrer" content="no-referrer">
  <meta name="description" content="Eat; Sleep; Code; Repeat;">

  <title>Learn how to use the embed package in Go by building a web page easily | Charly3Pins</title>


  <meta property="og:title" content="Learn how to use the embed package in Go by building a web page easily - charly3pins" />

  <meta property="og:type" content="website">
  <meta property="og:description" content="What is the new embed package added in Go 1.16 for and how can we use it to our advantage?">
  <meta property="og:url" content="https://charly3pins.dev/blog/learn-how-to-use-the-embed-package-in-go-by-building-a-web-page-easily/">
  <meta property="og:site_name" content="charly3pins.dev">
  
  <meta property="og:image" content="https://charly3pins.dev/images/gopher-hiking.svg">

  <meta name="twitter:card" content="summary_large_image">

  <meta name="twitter:title" content="Learn how to use the embed package in Go by building a web page easily" />


  <meta name="twitter:description" content="What is the new embed package added in Go 1.16 for and how can we use it to our advantage?">


  <meta name="twitter:image" content="https://charly3pins.dev/images/gopher-hiking.svg">



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-126216319-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  <link rel="stylesheet" href="https://charly3pins.dev/css/main.css" />
  <link rel="stylesheet" href="https://charly3pins.dev/css/syntax.css" />
  <link rel="stylesheet" href="https://charly3pins.dev/css/blog-cards.css" />
  <link rel="stylesheet" href="https://charly3pins.dev/css/pagination.css" />
</head>

	<body>
		<header class="site-header" role="banner">
	<div class="wrapper">
		<a class="site-title" rel="author" href="https://charly3pins.dev/">charly3pins.dev</a>
		<nav class="site-nav">
			<input type="checkbox" id="nav-trigger" class="nav-trigger">
			<label for="nav-trigger">
				<span class="menu-icon">
					<svg viewBox="0 0 18 15" width="18px" height="15px">
						<path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
					</svg>
				</span>
			</label>
			<div class="trigger">
                
                <a class="page-link" href="/whois">Who is ü§∑‚Äç‚ôÇÔ∏è</a>
                
                <a class="page-link" href="/blog">Blog ‚úçÔ∏è</a>
                
                <a class="page-link" href="/projects">Projects üë®‚Äçüíª</a>
                
                <a class="page-link" href="/tags">Tags üî†</a>
                
			</div>
		</nav>
	</div>
</header>
		
		<main class="page-content" aria-label="Content">
			<div class="wrapper">
				<article class="post h-entry" itemscope="" itemtype="http://schema.org/BlogPosting">
					<header class="post-header">
						<h1 class="post-title" itemprop="name headline">Learn how to use the embed package in Go by building a web page easily</h1>
						<p class="post-meta">
							<span class="dt-published" datespan="2023-08-23T00:00:00+00:00" itemprop="datePublished">16/08/2021</span>
							¬∑ 
							<span class="tags-container">
								<img class="tags-icon" src="/images/tags.png" alt="tags">
								
								<a class="tag" href="https://charly3pins.dev/tags/go/">go</a>
								
							</span>
							¬∑ 
							<span class="reading-time">Estimated reading time: 6 mins</span>
						</p>
					</header>
					
					<div class="share-container">
    <span class="share-heading">Share this post ‚Üí</span>
    <div id="share-buttons">
        
        <div class="twitter" title="Share post on Twitter" onclick="window.open('https://twitter.com/share?url=https:\/\/charly3pins.dev\/blog\/learn-how-to-use-the-embed-package-in-go-by-building-a-web-page-easily\/&amp;text=Learn how to use the embed package in Go by building a web page easily&amp;via=charly3pins&amp;hashtags=go');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>
            </svg>
        </div>
        <div class="linkedin" title="Share post on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&amp;url=https:\/\/charly3pins.dev\/blog\/learn-how-to-use-the-embed-package-in-go-by-building-a-web-page-easily\/&amp;title=Learn how to use the embed package in Go by building a web page easily');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"></path>
            </svg>
        </div>
        <div class="mail" title="Share post through Email" onclick="window.open('mailto:?&amp;body=https:\/\/charly3pins.dev\/blog\/learn-how-to-use-the-embed-package-in-go-by-building-a-web-page-easily\/');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"></path>
            </svg>
        </div>
    </div>
</div>


					<div class="post-content e-content" itemprop="articleBody">
						<p>Working with static files is never an easy task and less so in Go since we did not have native support for them and we had to pull third-party libraries. With the release of <a href="https://blog.golang.org/go1.16">Go 1.16</a> this changed. And it changed for the better, since it includes a new package called <a href="https://pkg.go.dev/embed">embed</a> that natively helps us work with static files.</p>
<p>In the official documentation of the package (previous link) there are several examples of use of this library:</p>
<ul>
<li>embedding a file as <code>string</code></li>
<li>embedding a file as <code>[]byte</code></li>
<li>embedding a file as the proper type of the <code>embed.FS</code> library</li>
</ul>
<p>The first two cases are very simple and with the examples in that article they are perfectly understood. By giving a little more examples (without code) I can tell you that the case of <code>string</code> could be valid when we want to load some&quot; simple &ldquo;configuration value from an external file. Instead of pulling an environment variable, we could have a config file with that value (not sensitive of course) and load that file with the library to embed that value.</p>
<p>If we wanted to do the same but with more than one value (more than one <code>string</code>) we would have to use the other type,<code> []byte</code>. In this way we could have for example a <code>.yaml</code> (we love YAML right?) With our configuration for the application and embed it in our application as an array of bytes and load all the values ‚Äã‚Äãat once. Then making a custom type (a struct itself) and marshalling the <code>[]byte</code> to our type would serve us without problems.</p>
<p>The third type of data for me is the most interesting to comment on and that is why I write this post. If you have ever set up a web page, you will know that it consists of several files&hellip; aha! static. For this, in Go we have the <code>html/template</code> package which needs to load the templates of the pages that we want to mount in memory.</p>
<p>At this point you might ask yourself, why is it tedious to work with static files? or also when is all this useful? Well right now I&rsquo;m going to explain. Imagine that our program needs to read a file, in the previous example the html template. This template will have a location, a directory in which it is stored. This location will be valid as long as our code compiles into the current directory. The moment we do a <code>go build</code> and move the binary to another destination, that reading will fail us because it will not find the specified path. To solve this problem there is the <code>embed</code> package.</p>
<p>Let&rsquo;s see a bit of code for this case. First of all we look at the <a href="https://pkg.go.dev/embed#FS">documentation</a> and see what fields the type that interests us <code>embed.FS</code> has and what methods it offers us. We see that there are no fields but there are three methods to open a file, read a file and read a directory and that these return an <code>fs.File</code>, a <code>[]byte</code> and a <code>[]fs.DirEntry</code> respectively in addition to the classic mistake each.</p>
<p>Since we want to set up a website, we are going to see the previously commented package which methods it offers us that are related to the three types that we can obtain from the <code>embed.FS</code> package. We see that there is a method <a href="https://pkg.go.dev/html/template#ParseFS">ParseFS()</a> that seems appropriate since it receives an <code>fs.FS</code> and a <code>string...</code> with the directories from where we are going to load said file.</p>
<p>Taking into account that the templates can be simple or by pulling layouts, we are going to see the most complete case which is when we use a layout to define the screen we want to paint and execute said layout in our templates.</p>
<h2 id="example-building-a-web-page">Example building a web page</h2>
<p>To do this example we will create the following folder and file structure:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-vim" data-lang="vim"><span class="line"><span class="cl"><span class="p">|-</span> <span class="nx">templates</span>/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">|-</span> <span class="nx">templates</span>/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span>	<span class="p">|-</span> <span class="nx">layouts</span>/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="p">|-</span> <span class="nx">main</span>.<span class="nx">go</span><span class="err">
</span></span></span></code></pre></div><p>Our main layout could be something like the following block like <code>layout.html</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">define</span> <span class="s">&#34;main&#34;</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nx">html</span> <span class="nx">lang</span><span class="p">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nx">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nx">title</span><span class="p">&gt;</span><span class="nx">Testing</span> <span class="nx">embed</span><span class="p">&lt;</span><span class="o">/</span><span class="nx">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nx">link</span> <span class="nx">href</span><span class="p">=</span><span class="s">&#34;//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css&#34;</span> <span class="nx">rel</span><span class="p">=</span><span class="s">&#34;stylesheet&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="o">/</span><span class="nx">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nx">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;container-fluid&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">			<span class="p">{{</span><span class="nx">template</span> <span class="s">&#34;content&#34;</span> <span class="p">.}}</span>
</span></span><span class="line"><span class="cl">		<span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="o">/</span><span class="nx">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="o">/</span><span class="nx">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">end</span><span class="p">}}</span>
</span></span></code></pre></div><p>Obviously this can be as complicated as you want and need. For the example I want to show, it is not necessary to complicate it further.</p>
<p>The template could be the following as <code>userProfile.html</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">template</span> <span class="s">&#34;main&#34;</span> <span class="p">.}}</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">define</span> <span class="s">&#34;content&#34;</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;container&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;dashboard jumbotron-fluid&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nx">h1</span><span class="p">&gt;</span><span class="nx">User</span><span class="p">&lt;</span><span class="o">/</span><span class="nx">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;row&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;col-sm-12&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-body&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nx">h5</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-title&#34;</span><span class="p">&gt;{{.</span><span class="nx">Name</span> <span class="p">}}&lt;</span><span class="o">/</span><span class="nx">h5</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nx">p</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-text&#34;</span><span class="p">&gt;</span><span class="nx">Email</span><span class="p">:</span> <span class="p">{{.</span><span class="nx">Email</span> <span class="p">}}&lt;</span><span class="o">/</span><span class="nx">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nx">p</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-text&#34;</span><span class="p">&gt;</span><span class="nx">Address</span><span class="p">:</span> <span class="p">{{.</span><span class="nx">Address</span> <span class="p">}}&lt;</span><span class="o">/</span><span class="nx">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nx">p</span> <span class="nx">class</span><span class="p">=</span><span class="s">&#34;card-text&#34;</span><span class="p">&gt;</span><span class="nx">Phone</span> <span class="nx">number</span><span class="p">:</span> <span class="p">{{.</span><span class="nx">PhoneNumber</span> <span class="p">}}&lt;</span><span class="o">/</span><span class="nx">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="o">/</span><span class="nx">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{{</span><span class="nx">end</span><span class="p">}}</span>
</span></span></code></pre></div><p>As you can see, it is also very simple to show information from a very basic user. It could be a user&rsquo;s profile page.</p>
<p>Once we have both the layout and the template, we have to chop our code in Go to load said information. To do this we create the function below in our <code>main.go</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;embed&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;html/template&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io/fs&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">layoutsDir</span>   <span class="p">=</span> <span class="s">&#34;templates/layouts&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">templatesDir</span> <span class="p">=</span> <span class="s">&#34;templates&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">extension</span>    <span class="p">=</span> <span class="s">&#34;/*.html&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//go:embed templates/* templates/layouts/*
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">files</span>     <span class="nx">embed</span><span class="p">.</span><span class="nx">FS</span>
</span></span><span class="line"><span class="cl">	<span class="nx">templates</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">template</span><span class="p">.</span><span class="nx">Template</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">LoadTemplates</span><span class="p">()</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">templates</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">templates</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">template</span><span class="p">.</span><span class="nx">Template</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">tmplFiles</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">fs</span><span class="p">.</span><span class="nf">ReadDir</span><span class="p">(</span><span class="nx">files</span><span class="p">,</span> <span class="nx">templatesDir</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">tmpl</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tmplFiles</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">tmpl</span><span class="p">.</span><span class="nf">IsDir</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">continue</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">pt</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">template</span><span class="p">.</span><span class="nf">ParseFS</span><span class="p">(</span><span class="nx">files</span><span class="p">,</span> <span class="nx">templatesDir</span><span class="o">+</span><span class="s">&#34;/&#34;</span><span class="o">+</span><span class="nx">tmpl</span><span class="p">.</span><span class="nf">Name</span><span class="p">(),</span> <span class="nx">layoutsDir</span><span class="o">+</span><span class="nx">extension</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">templates</span><span class="p">[</span><span class="nx">tmpl</span><span class="p">.</span><span class="nf">Name</span><span class="p">()]</span> <span class="p">=</span> <span class="nx">pt</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The interesting thing here is to see how we define the part of the variables:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//go:embed templates/* templates/layouts/*
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">files</span>     <span class="nx">embed</span><span class="p">.</span><span class="nx">FS</span>
</span></span></code></pre></div><p>With this we tell the compiler to look inside templates and templates / layouts for the files and load them into the <code>files</code> variable. Then in our function to load templates we simply initialize a map where we save the name of the template and its value. As I mentioned before, we use the <code>fs</code> package to read the files loaded with the <code>embed</code> package and then we can execute them with the function we saw from <code>ParseFS</code>.</p>
<p>Now that we have our templates loaded it is time to expose them. For this we will build a simple HTTP server so that it can be seen how to access our templates. First of all we create our handler. The next block can be in the same <code>main.go</code> or in a different file. Depending on the case, the calls to the function to render the templates and to some variables must be modified.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span> <span class="nx">userProfile</span> <span class="p">=</span> <span class="s">&#34;userProfile.html&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">UserProfile</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">t</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">templates</span><span class="p">[</span><span class="nx">userProfile</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;template %s not found&#34;</span><span class="p">,</span> <span class="nx">userProfile</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">data</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">	<span class="nx">data</span><span class="p">[</span><span class="s">&#34;Name&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;John Doe&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">data</span><span class="p">[</span><span class="s">&#34;Email&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;johndoe@email.com&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">data</span><span class="p">[</span><span class="s">&#34;Address&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;Fake Street, 123&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">data</span><span class="p">[</span><span class="s">&#34;PhoneNumber&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;654123987&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">t</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Finally we add our <code>main()</code> function in the <code>main.go</code> file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">err</span> <span class="o">:=</span> <span class="nf">LoadTemplates</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">r</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewServeMux</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">r</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/user-profile&#34;</span><span class="p">,</span> <span class="nx">UserProfile</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">r</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="conclusion">Conclusion</h2>
<p>With all this, I hope that working with static files will be much easier and more practical than before. You can see the full code in <a href="https://github.com/charly3pins/go-embed-example">my repository</a>.
If there is any part that has not been completely clear or there are parts that I have not covered that you would like me to do, leave me a comment right here or through my social networks that you have on my profile and I will be happy to respond.</p>

					</div>

					<div class="share-container">
    <span class="share-heading">Share this post ‚Üí</span>
    <div id="share-buttons">
        
        <div class="twitter" title="Share post on Twitter" onclick="window.open('https://twitter.com/share?url=https:\/\/charly3pins.dev\/blog\/learn-how-to-use-the-embed-package-in-go-by-building-a-web-page-easily\/&amp;text=Learn how to use the embed package in Go by building a web page easily&amp;via=charly3pins&amp;hashtags=go');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>
            </svg>
        </div>
        <div class="linkedin" title="Share post on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&amp;url=https:\/\/charly3pins.dev\/blog\/learn-how-to-use-the-embed-package-in-go-by-building-a-web-page-easily\/&amp;title=Learn how to use the embed package in Go by building a web page easily');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"></path>
            </svg>
        </div>
        <div class="mail" title="Share post through Email" onclick="window.open('mailto:?&amp;body=https:\/\/charly3pins.dev\/blog\/learn-how-to-use-the-embed-package-in-go-by-building-a-web-page-easily\/');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"></path>
            </svg>
        </div>
    </div>
</div>


					
					
					<ul class="post-list">
						
						<li>
							<h3 class="blog-header">
								<a class="post-link" href="https://charly3pins.dev/blog/automate-your-github-profile-readme-with-go-and-github-actions/">Automate Your GitHub Profile README with Go and GitHub Actions</a>
								<span class="post-meta"><time class="dt-published" datetime="2023-08-23T00:00:00+00:00" itemprop="datePublished">16/03/2021</time></span>
								<span class="tags-container">
									<img class="tags-icon" src="/images/tags.png" alt="tags">
									
									<a class="tag" href="https://charly3pins.dev/tags/go/">go</a>
									
									<a class="tag" href="https://charly3pins.dev/tags/github/">github</a>
									
									<a class="tag" href="https://charly3pins.dev/tags/ci/cd/">ci/cd</a>
									
								</span>
							</h3>
							Create a dynamic Markdown file for your README with the help of Go and deploy it to your profile&#39;s GitHub using GitHub Actions.
						</li>					
						
						<li>
							<h3 class="blog-header">
								<a class="post-link" href="https://charly3pins.dev/blog/level-up-your-preseentations-with-go/">Level up your presentations with Go</a>
								<span class="post-meta"><time class="dt-published" datetime="2023-08-23T00:00:00+00:00" itemprop="datePublished">06/10/2020</time></span>
								<span class="tags-container">
									<img class="tags-icon" src="/images/tags.png" alt="tags">
									
									<a class="tag" href="https://charly3pins.dev/tags/go/">go</a>
									
									<a class="tag" href="https://charly3pins.dev/tags/life/">life</a>
									
								</span>
							</h3>
							Generate easily your presentations with &#34;present&#34;, the tool powered by Go that generates and renders your slides.
						</li>					
						
						<li>
							<h3 class="blog-header">
								<a class="post-link" href="https://charly3pins.dev/projects/tournaments-generator/">Tournaments generator</a>
								<span class="post-meta"><time class="dt-published" datetime="2023-08-23T00:00:00+00:00" itemprop="datePublished">01/05/2020</time></span>
								<span class="tags-container">
									<img class="tags-icon" src="/images/tags.png" alt="tags">
									
									<a class="tag" href="https://charly3pins.dev/tags/go/">go</a>
									
									<a class="tag" href="https://charly3pins.dev/tags/flutter/">flutter</a>
									
									<a class="tag" href="https://charly3pins.dev/tags/python/">python</a>
									
								</span>
							</h3>
							Proof of concept building an application for managing FIFA 20 tournaments between different people using Flutter for building a mobile app and Go for building an API acting as a server. Also used Python to build simple scrapers.
						</li>					
						
					</ul>
					
					
					<div class="comments-section">
    <h2 class="comments-heading">Comments or Questions? </h2>
</div>
					
				</article>
			</div>
		</main>

		<footer class="site-footer h-card">
	<span onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="scroll-top">
		<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5">
			<path stroke="none" d="M0 0h24v24H0z" fill="#9e9e9e"/>
			<path d="M18 15l-6 -6l-6 6h12" fill="#232223"/>
		</svg>
	</span>
	<div class="wrapper">
		<div class="footer-col-wrapper">
			<div class="footer-col footer-col-1">
				<ul class="contact-list">
					<div class="footer-heading">¬© 2018 - 2023 Charly3Pins</div>
					<li>Last post on 15/04/2023</li>
				</ul>
			</div>
			<div class="footer-col footer-col-3">
				<div class="social-media-list">
					<a href="https://github.com/charly3pins" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path>
						</svg>
					</a>
					<a href="https://www.twitter.com/charly3pins" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path>
						</svg>
					</a>
					<a href="https://www.linkedin.com/in/carlesfuste" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path>
						</svg>
					</a>
					<a href="https://stackoverflow.com/users/4948631/charly3pins" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="2120" height="2500" viewBox="0 0 169.61 200">
							<path d="M140.44 178.38v-48.65h21.61V200H0v-70.27h21.61v48.65z"/>
							<path d="M124.24 140.54l4.32-16.22-86.97-17.83-3.78 17.83zM49.7 82.16L130.72 120l7.56-16.22-81.02-37.83zm22.68-40l68.06 57.3 11.35-13.51-68.6-57.3-11.35 13.51zM116.14 0l-14.59 10.81 53.48 71.89 14.58-10.81zM37.81 162.16h86.43v-16.21H37.81z"/>
						</svg>
					</a>
					<a href="https://dev.to/charly3pins" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 448 512">
							<path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/>
						</svg>
					</a>
					<a href="https://charly3pins.dev/index.xml" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"></path>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</div>
</footer>

	</body>
</html>
