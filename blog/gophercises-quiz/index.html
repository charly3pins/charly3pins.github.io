<!DOCTYPE html>
<html lang="en" data-theme="light">
	
	<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="referrer" content="no-referrer">
  <meta name="description" content="Eat; Sleep; Code; Repeat;">

  <title>Gophercises - Quiz game | Charly3Pins</title>


  <meta property="og:title" content="Gophercises - Quiz game - charly3pins" />

  <meta property="og:type" content="website">
  <meta property="og:description" content="Code review of my first exercise in the Gophercises page. It&#39;s focused in the CSV and time packages in addition to an introduction for the goroutines and channels.">
  <meta property="og:url" content="https://charly3pins.dev/blog/gophercises-quiz/">
  <meta property="og:site_name" content="charly3pins.dev">
  
  <meta property="og:image" content="https://charly3pins.dev/images/go-learn.png">

  <meta name="twitter:card" content="summary_large_image">

  <meta name="twitter:title" content="Gophercises - Quiz game" />


  <meta name="twitter:description" content="Code review of my first exercise in the Gophercises page. It&#39;s focused in the CSV and time packages in addition to an introduction for the goroutines and channels.">


  <meta name="twitter:image" content="https://charly3pins.dev/images/go-learn.png">



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-126216319-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  <link rel="stylesheet" href="https://charly3pins.dev/css/main.css" />
  <link rel="stylesheet" href="https://charly3pins.dev/css/syntax.css" />
  <link rel="stylesheet" href="https://charly3pins.dev/css/blog-cards.css" />
  <link rel="stylesheet" href="https://charly3pins.dev/css/pagination.css" />
</head>

	<body>
		<header class="site-header" role="banner">
	<div class="wrapper">
		<a class="site-title" rel="author" href="https://charly3pins.dev/">charly3pins.dev</a>
		<nav class="site-nav">
			<input type="checkbox" id="nav-trigger" class="nav-trigger">
			<label for="nav-trigger">
				<span class="menu-icon">
					<svg viewBox="0 0 18 15" width="18px" height="15px">
						<path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
					</svg>
				</span>
			</label>
			<div class="trigger">
                
                <a class="page-link" href="/whois">Who is ü§∑‚Äç‚ôÇÔ∏è</a>
                
                <a class="page-link" href="/blog">Blog ‚úçÔ∏è</a>
                
                <a class="page-link" href="/projects">Projects üë®‚Äçüíª</a>
                
                <a class="page-link" href="/tags">Tags üî†</a>
                
			</div>
		</nav>
	</div>
</header>
		
		<main class="page-content" aria-label="Content">
			<div class="wrapper">
				<article class="post h-entry" itemscope="" itemtype="http://schema.org/BlogPosting">
					<header class="post-header">
						<h1 class="post-title" itemprop="name headline">Gophercises - Quiz game</h1>
						<p class="post-meta">
							<span class="dt-published" datespan="2023-08-23T00:00:00+00:00" itemprop="datePublished">24/09/2018</span>
							¬∑ 
							<span class="tags-container">
								<img class="tags-icon" src="/images/tags.png" alt="tags">
								
								<a class="tag" href="https://charly3pins.dev/tags/go/">go</a>
								
							</span>
							¬∑ 
							<span class="reading-time">Estimated reading time: 8 mins</span>
						</p>
					</header>
					
					<div class="share-container">
    <span class="share-heading">Share this post ‚Üí</span>
    <div id="share-buttons">
        
        <div class="twitter" title="Share post on Twitter" onclick="window.open('https://twitter.com/share?url=https:\/\/charly3pins.dev\/blog\/gophercises-quiz\/&amp;text=Gophercises - Quiz game&amp;via=charly3pins&amp;hashtags=go');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>
            </svg>
        </div>
        <div class="linkedin" title="Share post on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&amp;url=https:\/\/charly3pins.dev\/blog\/gophercises-quiz\/&amp;title=Gophercises - Quiz game');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"></path>
            </svg>
        </div>
        <div class="mail" title="Share post through Email" onclick="window.open('mailto:?&amp;body=https:\/\/charly3pins.dev\/blog\/gophercises-quiz\/');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"></path>
            </svg>
        </div>
    </div>
</div>


					<div class="post-content e-content" itemprop="articleBody">
						<p>This is the first of a several articles I&rsquo;m planning to write commenting the different exercises that I&rsquo;m doing in <a href="https://gophercises.com/">Gophercises</a> page.</p>
<blockquote>
<p>It&rsquo;s a FREE course that will help you become more familiar with Go while developing your skills as a programmer. In the course we will build roughly 20 different mini-applications, packages, and tools that are each designed to teach you something different.</p>
<p><!-- raw HTML omitted -->Gophercises<!-- raw HTML omitted --></p>
</blockquote>
<p>I like playing with Go on this site because each exercise is focused in a set of packages of the language and the way of they are presented is really clear and easy to understand. Also, the explanations in video are very helpful to see the final code once you&rsquo;ve yours done.</p>
<h1 id="quiz-game">Quiz game</h1>
<p><a href="https://gophercises.com/exercises/quiz">Exercise 1</a> is about creating a program that reads a quiz provided via CSV file, then give the quiz to a user keeping track of how many questions they get right and how many they get incorrect. Second part is about adding a timer to make the game more interesting to play ending the execution when the timer is expired. At the end of the quiz the program shall output the total number of questions correct and how many questions there were in total. Questions given invalid answers or unanswered are considered incorrect.</p>
<p>On the first part the most exciting task is to work with <code>encoding/csv</code> and <code>flag</code> packages. First one is obviously for work with the CSV file where we&rsquo;ll have our quiz stored. Second one implements command-line flag parsing which we&rsquo;ll use it for injecting the name of the file when we execute the program. What I always do in this cases is go to the <a href="https://golang.org/pkg/">official documentation</a> and check the <code>#pkg-index</code> anchor of the package that I&rsquo;m intereseted. There are a list of all methods and types that the package contains. Then the <code>#pkg-examples</code> one is very helpful to clarify sometimes the method usage.</p>
<h2 id="flag-parse">Flag parse</h2>
<p>First of all, we want to know the filename where is stored the quiz using flags. If we check the <a href="https://golang.org/pkg/flag/#pkg-index">flag package</a> we see that there are a lot of types supported, in this case we need the <a href="https://golang.org/pkg/flag/#String">String</a>. So, for obtaining the filename we&rsquo;ll need to use the method like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">filename</span> <span class="o">:=</span> <span class="nx">flag</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="s">&#34;csv&#34;</span><span class="p">,</span> <span class="s">&#34;problems.csv&#34;</span><span class="p">,</span> <span class="s">&#34;csv filename&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">flag</span><span class="p">.</span><span class="nf">Parse</span><span class="p">()</span>
</span></span></code></pre></div><h2 id="process-csv">Process CSV</h2>
<p>Once we have the filename it&rsquo;s time to read it from the system. In my case I&rsquo;ve used the <code>os</code> package to open the file.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="o">*</span><span class="nx">filename</span><span class="p">)</span>
</span></span></code></pre></div><p><!-- raw HTML omitted -->Note that I&rsquo;m using a pointer to filename because the String method returns a <code>*string</code>.<!-- raw HTML omitted --></p>
<p>Then it&rsquo;s time to use the <code>encoding/csv</code> package for reading the CSV.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">r</span> <span class="o">:=</span> <span class="nx">csv</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">rows</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">()</span>
</span></span></code></pre></div><p>With method <a href="https://golang.org/pkg/encoding/csv/#Reader.ReadAll">ReadAll</a> we obtain a <code>[][]string</code>, so we just need to loop over the slice obtained and parse it to the types we need. In the quiz game, we know that CSV file contains two strings, first one is the question and the second one is the answer. I&rsquo;ve created a custom type called <code>problem</code> with two strings for manipulate the rows of the file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">problem</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">question</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">answer</span>   <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Now it&rsquo;s time to convert each row read from the file to a <code>problem</code> struct. The easiest way is to loop over the map of rows and declare a slice of problems <code>[]problem</code> and initialize them with the values of the row that we are obtaining:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">parseCSV</span><span class="p">(</span><span class="nx">rows</span> <span class="p">[][]</span><span class="kt">string</span><span class="p">)</span> <span class="p">[]</span><span class="nx">problem</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">problems</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">problem</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">rows</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"> 	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">row</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">rows</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">problems</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">problem</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">question</span><span class="p">:</span> <span class="nx">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">			<span class="nx">answer</span><span class="p">:</span>   <span class="nx">strings</span><span class="p">.</span><span class="nf">TrimSpace</span><span class="p">(</span><span class="nx">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"> 	<span class="k">return</span> <span class="nx">problems</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted -->I&rsquo;ve initialized the problems var with the <code>len(rows)</code> because I knew the exact length and will not change during the execution. Being strict with the nomenclature, the type of our var problems is <code>[len(rows)]problem</code>. In Go when a slice have the length fixed is called array. You can read further on <a href="https://blog.golang.org/go-slices-usage-and-internals">this post</a>.<!-- raw HTML omitted --></p>
<p>Finally it only remains to display the questions on the screen and request the user for the answers. For achieve this I&rsquo;ve used the <a href="https://golang.org/pkg/fmt/#Scanf">fmt.Scanf()</a>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">problems</span> <span class="o">:=</span> <span class="nf">parseCSV</span><span class="p">(</span><span class="nx">rows</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">correct</span> <span class="o">:=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">problem</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">problems</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Problem #%d: %s = &#34;</span><span class="p">,</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">problem</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">answer</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Scanf</span><span class="p">(</span><span class="s">&#34;%s\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">answer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">answer</span> <span class="o">==</span> <span class="nx">problem</span><span class="p">.</span><span class="nx">answer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">correct</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d answers correct of %d questions.&#34;</span><span class="p">,</span> <span class="nx">correct</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">problems</span><span class="p">))</span>
</span></span></code></pre></div><p>Check the entire solution for this part on <a href="https://github.com/charly3pins/gophercises/commit/3a841b67c154fbbb7749eb61612989be8c1127a9#diff-eef4eb636e863480b77d87bc3000e0d1">this commit</a>.</p>
<h2 id="adding-timers">Adding timers</h2>
<p>On the second part we are asked to add a timer with a default value of 30s customizable via flags. We need to refactor the code to stop the execution when the time is expired.</p>
<p>On this part is introduced the <code>time</code> package used for measuring and displaying time. For do the task, we&rsquo;ll need to create a <a href="https://golang.org/pkg/time/#Timer">Timer</a>. The package provides <a href="https://golang.org/pkg/time/#NewTimer">NewTimer</a> method which need a <a href="https://golang.org/pkg/time/#Duration">Duration</a> as a parameter. Not casual the package provide a set of constants to convert time to nanosecond and then convert them to Duration. All togheter looks like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">timer</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">NewTimer</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Duration</span><span class="p">(</span><span class="o">*</span><span class="nx">limit</span><span class="p">)</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><code>*limit</code> is obtained via flag in same way we&rsquo;ve obtained the filename in the first section.<!-- raw HTML omitted --></p>
<p>At this point we have the timer created and if we analyze it we see that it contains a channel inside. Let&rsquo;s see what it&rsquo;s a channel first of all and why it&rsquo;s useful in this case.</p>
<blockquote>
<p>Channels are the pipes that connect concurrent goroutines. You can send values into channels from one goroutine and receive those values into another goroutine</p>
<p><!-- raw HTML omitted --><a href="https://gobyexample.com/channels">https://gobyexample.com/channels</a><!-- raw HTML omitted --></p>
</blockquote>
<p>You can send value to channel <code>ch &lt;- v</code> and you can receive from a channel and assign it to a var <code>v := &lt;-ch</code>. Sends and receives block until the other side is ready.</p>
<p>If you&rsquo;ve checked the documentation for Timer, you&rsquo;ll see that says:</p>
<blockquote>
<p>When the Timer expires, the current time will be sent on C</p>
<p><!-- raw HTML omitted --><a href="https://golang.org/pkg/time/#Timer">https://golang.org/pkg/time/#Timer</a><!-- raw HTML omitted --></p>
</blockquote>
<p>So this means that we can use the Timer&rsquo;s channel to know when the timer is expired just checking if it contains any value or not. For this we can use a <code>select</code> (switch in other languages) inside our <code>for</code> loop and checking it. If we&rsquo;re in this case, we&rsquo;ll need to stop the quiz so we&rsquo;ll need to print the final result:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="o">&lt;-</span><span class="nx">timer</span><span class="p">.</span><span class="nx">C</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;\n%d answers correct of %d questions.\n&#34;</span><span class="p">,</span> <span class="nx">correct</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">problems</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted -->The <code>return</code> is because I want to break the loop and I don&rsquo;t want to use labels and gotos on this code.<!-- raw HTML omitted --></p>
<p>On the other hand, we need to cover the case when the timer is not expired, so we can add a <code>default</code> case printing the question and waiting for the answer. For achieve this, we just need to move our previous code inside the <code>select</code> block. The complete code for the loop:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">problem</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">problems</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Problem #%d: %s = &#34;</span><span class="p">,</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">problem</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">case</span> <span class="o">&lt;-</span><span class="nx">timer</span><span class="p">.</span><span class="nx">C</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;\n%d answers correct of %d questions.\n&#34;</span><span class="p">,</span> <span class="nx">correct</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">problems</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="kd">var</span> <span class="nx">answer</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scanf</span><span class="p">(</span><span class="s">&#34;%s\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">answer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">answer</span> <span class="o">==</span> <span class="nx">problem</span><span class="p">.</span><span class="nx">answer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">correct</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>At this point you could think that we have the program finished but if you execute it you&rsquo;ll see what happens. Yes! the <code>fmt.Scanf(&quot;%s\n&quot;, &amp;answer)</code> is blocking and the program doesn&rsquo;t continues execution until the function receives a value. To solve this, we&rsquo;ll need to use a <code>goroutine</code> and move the blocking part inside. However, before that let&rsquo;s talk a bit about what are and how to integrate with our code.</p>
<blockquote>
<p>A goroutine is a lightweight thread managed by the Go runtime.</p>
<p><!-- raw HTML omitted --><a href="https://tour.golang.org/concurrency/1">https://tour.golang.org/concurrency/1</a><!-- raw HTML omitted --></p>
</blockquote>
<p>So in Go the threads are called <!-- raw HTML omitted -->goroutine<!-- raw HTML omitted --> and they are easy to recognise because they are calls to a function preceeded by the keyword <code>go</code>. Using the golang tour example below, we see the goroutine is executing the <code>say</code> function concurrently passing the parameter &ldquo;world&rdquo; and in main thread we have the exeuction of <code>say</code> with parameter &ldquo;hello&rdquo;.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">say</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="s">&#34;world&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nf">say</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>As we expected, the output of the program is not sequential and we obtain the 5x <code>hello world</code> sentences mixed.</p>
<pre tabindex="0"><code>world
hello
hello
world
world
hello
hello
world
world
hello
</code></pre><p>Knowing what is a channel and how to work with them and knowing the powerful of the goroutines, we can mix them to achieve our goal in this task. The channels allows goroutines to synchronize without explicit locks or condition variables between them. Let&rsquo;s do it!</p>
<p>First we move the question outside the <code>select</code> block and extract the <code>default</code> case in a goroutine like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Problem #%d: %s = &#34;</span><span class="p">,</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">problem</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">answerChannel</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">answer</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Scanf</span><span class="p">(</span><span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">answer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">answerChannel</span> <span class="o">&lt;-</span> <span class="nx">answer</span>
</span></span><span class="line"><span class="cl"><span class="p">}()</span>
</span></span></code></pre></div><p><!-- raw HTML omitted -->As we read, we need a channel to talk between the goroutines (remember that the main thread is a goroutine in itself) so we have to create a new channel <code>answerChannel</code> and pass the user&rsquo;s response. <!-- raw HTML omitted --></p>
<p>Last but not least, we need to do is read the channel we&rsquo;ve created. For this I&rsquo;ve created a new <code>case</code> block:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">select</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="o">&lt;-</span><span class="nx">timer</span><span class="p">.</span><span class="nx">C</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;\n%d answers correct of %d questions.\n&#34;</span><span class="p">,</span> <span class="nx">correct</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">problems</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="nx">answer</span> <span class="o">:=</span> <span class="o">&lt;-</span><span class="nx">answerChannel</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">answer</span> <span class="o">==</span> <span class="nx">problem</span><span class="p">.</span><span class="nx">answer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">correct</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Now we have all done, checking on the first case the Timer&rsquo;s channel to know if the time is expired and the second case receiving the user&rsquo;s answer every time he types on the screen, but without blocking the execution because we&rsquo;ve moved this task to a <code>goroutine</code>.</p>
<p>The full code for the second part is available <a href="https://github.com/charly3pins/gophercises/commit/2b821d0a9821cd6de93985a963e2a24350b34b7b">here</a>.</p>
<h1 id="in-summary">In summary</h1>
<p>To sum up, I think this is a very good exercise to do because it introduces you a few useful packages like <code>encoding/csv</code> that I&rsquo;m sure you&rsquo;ll need to use sometimes. There a lot of information that is stored in <code>.csv</code> and it&rsquo;s always useful know how to deal with it. Also it&rsquo;s a good starting point for the <code>channels</code> and <code>goroutines</code> (probably I&rsquo;ll dedicate an entire post to them). Here you can see how to work with them together and why are useful in a real case.</p>
<p>You can check the <a href="https://github.com/charly3pins/gophercises/tree/master/quiz">complete repo</a> that I&rsquo;ve created for this exercise.</p>

					</div>

					<div class="share-container">
    <span class="share-heading">Share this post ‚Üí</span>
    <div id="share-buttons">
        
        <div class="twitter" title="Share post on Twitter" onclick="window.open('https://twitter.com/share?url=https:\/\/charly3pins.dev\/blog\/gophercises-quiz\/&amp;text=Gophercises - Quiz game&amp;via=charly3pins&amp;hashtags=go');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>
            </svg>
        </div>
        <div class="linkedin" title="Share post on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&amp;url=https:\/\/charly3pins.dev\/blog\/gophercises-quiz\/&amp;title=Gophercises - Quiz game');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"></path>
            </svg>
        </div>
        <div class="mail" title="Share post through Email" onclick="window.open('mailto:?&amp;body=https:\/\/charly3pins.dev\/blog\/gophercises-quiz\/');">
            <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"></path>
            </svg>
        </div>
    </div>
</div>


					
					
					
					<div class="comments-section">
    <h2 class="comments-heading">Comments or Questions? </h2>
</div>
					
				</article>
			</div>
		</main>

		<footer class="site-footer h-card">
	<span onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="scroll-top">
		<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5">
			<path stroke="none" d="M0 0h24v24H0z" fill="#9e9e9e"/>
			<path d="M18 15l-6 -6l-6 6h12" fill="#232223"/>
		</svg>
	</span>
	<div class="wrapper">
		<div class="footer-col-wrapper">
			<div class="footer-col footer-col-1">
				<ul class="contact-list">
					<div class="footer-heading">¬© 2018 - 2023 Charly3Pins</div>
					<li>Last post on 15/04/2023</li>
				</ul>
			</div>
			<div class="footer-col footer-col-3">
				<div class="social-media-list">
					<a href="https://github.com/charly3pins" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path>
						</svg>
					</a>
					<a href="https://www.twitter.com/charly3pins" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path>
						</svg>
					</a>
					<a href="https://www.linkedin.com/in/carlesfuste" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path>
						</svg>
					</a>
					<a href="https://stackoverflow.com/users/4948631/charly3pins" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="2120" height="2500" viewBox="0 0 169.61 200">
							<path d="M140.44 178.38v-48.65h21.61V200H0v-70.27h21.61v48.65z"/>
							<path d="M124.24 140.54l4.32-16.22-86.97-17.83-3.78 17.83zM49.7 82.16L130.72 120l7.56-16.22-81.02-37.83zm22.68-40l68.06 57.3 11.35-13.51-68.6-57.3-11.35 13.51zM116.14 0l-14.59 10.81 53.48 71.89 14.58-10.81zM37.81 162.16h86.43v-16.21H37.81z"/>
						</svg>
					</a>
					<a href="https://dev.to/charly3pins" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 448 512">
							<path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/>
						</svg>
					</a>
					<a href="https://charly3pins.dev/index.xml" target="_blank">
						<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
							<path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"></path>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</div>
</footer>

	</body>
</html>
